\documentclass[a4,12pt]{scrartcl}

%Basic 
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage{float}
\usepackage[bottom = 3.50cm]{geometry}

%Titel Seite
\title{CLOUD INFRASTRUCTURE}
\subtitle{Lab-07}
\author{Giorgio Vincenti \and Samuel Krieg}
\date{\today}


%Kopf, Fusszeile
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{ \begin{picture}(0,0) \put(0,0){\includegraphics[width=3cm]{./pictures/hsrlogo.png}} \end{picture}}
\chead{}
\rhead{Seite \thepage}
\lfoot{Cloud Infrastructure \\Lab-07}
\cfoot{Giorgio Vincenti \and Samuel Krieg}
\rfoot{\today}
\renewcommand{\headrulewidth}{0.4pt}

%Bilder
\usepackage{graphicx}

%Tabellen
\usepackage{booktabs}

%Codesnippets
\usepackage{listings}
\lstset{language=bash} 

%Querformat für eine Seite
\usepackage{lscape}
\usepackage{rotating}
\usepackage{pdflscape}

%Temp
\usepackage{lipsum}



\begin{document}

\clearpage\maketitle
\thispagestyle{empty}
\tableofcontents
\newpage

\section{Anforderungen an ein modernes Datacenter}
\subsection{Herausforderungen}
Die Herausforderungen in einem moderem Datacenter bestehen darin die riesigen Datenmengen, die generiert werden, effizient und schnell verarbeiten zu können. Die Storages und Server Performance spielen dabei eine grosse rolle, jedoch bringt diese Performance nichts, wenn das Netzwerk nicht dementsprechend mit den Datenmengen effizient umgehen kann. Die grossen Datenmengen verlassen das Datacenter nicht, sondern fliessen von System zu System.

\subsubsection{Beispiele}
Hier einige Beispiele in der Praxis. \\

\noindent \textbf{VMotion:} Zum Beispiel bei Einsatz von Virtualisierung muss der Administrator in der Lage sein, VMs über das Netzwerk auf andere Hosts innerst kürzester Zeit verschieben können. \\

\noindent \textbf{Webserver:} Ein anderes Beispiel bezieht sich auf ein Webserver/Datenbank Modell. Der Webserver muss Daten der Datenbank abfragen und abholen ohne grossen Verzögerungen.\\

\noindent \textbf{Backup:} Ein weiteres Beispiel betrifft die Backups der Maschinen. Da fliessen ebenfalls grosse Datenmengen übers Netzwerk. Falls mehrere Server innerhalb eines gewissen Zeitraums gesichert werden müssen, muss die Netzwerkperformance stimmen, damit keine Engpässe auftreten. 

\subsection{Anforderungen}
Die Anforderungen an ein solches Datacenter sind sehr hoch. Da gibt es einiges zu beachten: 
\begin{itemize}
\item Sehr hohe Verfügbarkeit 
\item Mobilität von Applikationen, Systemen und Daten
\item Zugriffe auf Applikationen, Systemen und Daten 
\item Hohe Auto-Skalierbarkeit 
\item Genaue Abrechnungen auf benutzte Dienste 
\item Sicherheit 
\item Hohe Performance 
\item Abhängigkeit 
\item Autoprovisioning von Applikationen, Systemen und Daten
\end{itemize}

\subsection{Netzwerkarchitektur}
Die Netzwerkarchitektur spielt eine sehr grosse Rolle in einem Datacenter. Auch diese bringt grosse Anforderungen mitsich, damit das Beste aus der Infrastruktur rausgeholt werden kann. 
\begin{itemize}
\item Skalierbarkeit
\item Performance 
\item Hohen Datendurchsatz zwischen den Systemen
\item Elephant-flows fähig 
\item Managebar 
\end{itemize}

\section{TRILL}
Trill steht für \textbf{Tr}ansparent \textbf{I}nterconnection of \textbf{L}ots of \textbf{L}inks und ist ein von der IETF festgelegten Standard.

\subsection{Funktion}
TRILL ist eine Kombination von Layer 2 (bridging) und Layer 3 (routing). Dank dieser Kombination ermöglicht TRILL ein routing auf Layer 2 zu betreiben. Wird ein Layer 2 Netzwerk auf Layer 3 betrieben, ist kein Spanning-Tree mehr notwendig.

\subsubsection{Implementation}
TRILL wird von  Geräte implementiert die sich RBridges (routing bridges) nennen. Ein anderer Name für diese Geräte ist TRILL Switches. 

\subsubsection{Routing}
Zwischen den verschiedenen RBridges wird ein Link State Routing Protokol eingesetzt, damit alle RBridges über die gesamte Netztopologie bescheid wissen. Dies ermöglicht den RBridges den optimalen Pfad zur Destination ausfindigzumachen. Als Protokoll wird IS-IS eingesetzt, weil es auf Layer 2 kommuniziert und somit keinerlei IP-Konfiguration benötigt und sehr leicht erweiterbar ist. TRILL erstellt eine separata IS-IS Instanz und ist von einer eventuell bestehenden Layer 3 IS-IS Instanz komplett losgelöst. Jede RBridge hat eine eindeutige IS-IS ID von 48 Bit, welche von der eigenen MAC-Adresse abgeleitet wird. 

\subsubsection{RBrigdes ID}
Jede RBrigde im Netzwerk hat eine eindeutige ID (Bridge Identifier). Diese ID wird entweder dynamisch gewählt, oder kann durch den Netzwerkadministrator statisch vergeben werden. 

\subsubsection{Loop Prevention}
Im TRILL Header existiert ein Feld das sich Hop Count nennt. Durch dieses Feld werden Loops verhindert. Die RBridges stellen das Hop Count Feld auf die erwartete anzahl Hops, und jede RBridge dekrementiert das Feld um 1. Bei 0 wird das Packet verworfen.  

\subsubsection{Encapsulation}
Die RBridge welches ein Ethernet Frame von einem Client erhält (ingress bridge) verpackt das Frame in ein TRILL Packet. Dabei wird der TRILL Header eingefügt (siehe nächstes Kapitel). In diesem Header wird die destination bridge (engress bridge) spezifiziert, welche das ankommende Packet wieder auspackt und es an den Client weiter sendet, welcher das Packet erhalten soll. Wie ein eingepacktes Frame aussieht, wird im nächsten Kapitel gezeigt. 

\subsubsection{VLAN-Tags}
VLAN kann trotz TRILL verwendet werden. Es wird zwischen zwei VLANs unterschieden. Im Inner Ethernet Header: Inner VLAN-Tag, im Outer Ethernet Header: Outer VLAN-Tag. Die VLAN-Tags werden von TRILL nicht verrändert. Das Inner VLAN-Tag ist das ursprüngliche VLAN des Clients. Der Outer VLAN-Tag wird von der RBridge gesetzt beim Versand des Packets. 

\subsection{Header}
Der Header von TRILL sieht gemäss RFC 6325 folgendermassen aus: 

\begin{figure} [H]
	\begin{center}
	\includegraphics[width=0.80\textwidth]{./pictures/trill_header.png}
	\caption{TRILL Header aus RFC 6325}
	\label{x}
	\end{center}
\end{figure}

\subsubsection{Felder}
\begin{itemize}
\item V (Version: aktuell 0): 2 Bit
\item R (Reserved): 2 Bit.
\item M (Multi-destination: 1. Bit 0 = unicast, 2. Bit 1 = distribution tree): 2 Bit.
\item Op-Length (Options Length): 5 Bit
\item Hop Count(jede RBridge dekrementiert, bei 0 wird Paket verworfen): 6 Bit
\item Egress RBridge Nickname (source bridge): 16 Bit identifier
\item Ingress RBridge Nickname (destination bridge): 16 Bit identifier
\end{itemize}

\subsubsection{Encapsulation TRILL Frame}
Ein eingepacktes TRILL Frame sieht folgendermassen aus: (wurde aus RFC 6325 entnommen) 

\begin{figure} [H]
	\begin{center}
	\includegraphics[width=0.80\textwidth]{./pictures/trill_encapsulation.png}
	\caption{An Ethernet Encapsulated TRILL Frame}
	\label{x}
	\end{center}
\end{figure}

\noindent Der Client sendet das Packet, welches aus Inner Ethernet Frame, Ethernet Payload und Ethernet FCS besteht, an die ingress bridge. Diese packt den TRILL Header obendrauf, welcher die engress brigde (destination bridge) enthält und sendet das Packet an die nächste RBridge. Bei jedem Hop wird der Outer Ethernet Header angepasst, je nach Source und Destination Adresse. Das restliche Packet bleibt erhalten, bis es bei der engress bridge ankommt. Da wird es entpackt und an den Client weitergesendet. 
\newpage

\noindent Hier eine detailliertere Abbildung eines Frames, das zwischen zwei RBridges ausgetauscht wird: (über zwei weitere RBridges) 
\begin{figure} [H]
	\begin{center}
	\includegraphics[width=0.80\textwidth]{./pictures/trill_frame_flow.png}
	\caption{TRILL Data Encapsulation over Ethernet}
	\label{x}
	\end{center}
\end{figure}

\noindent Anhand von dieser Grafik ist zu erkennen, das der Outer Ethernet Header nach jedem Hop geändert wird. In diesem Beispiel befindet sich das Packet zwischen RB3 und RB4. Dies bedeutet das im Outer Ethernet Header unter Destination RB4 steht, und unter Source RB3. Das restliche Packet ist unverrändert (abgesehen der Hop Count im TRILL Header, da wird dekrementiert nach jedem Hop). 
\newpage

\subsection{Ziele von TRILL}
Das Hauptziel von TRILL ist es ein Layer 2 Routing zu betreiben. Dadurch wird das Spanning-Tree Protokoll nicht weiter benötigt, das in Rechenzentren inakzeptable Aussetzer verursachen würde. TRILL kann einfach auch in bestehende Netzwerke eingesetzt werden, in dem nicht alle Geräte TRILL unterstützen. 

\subsection{Wieso wurde TRILL entwickelt?}
TRILL wurde entwickelt um Spanning-Tree in kritische Umgebungen ablösen zu können. Spanning-Tree ist nicht gut geeignet da es die ungenutzte Pfade blockiert um loops zu vermeiden. Dadurch kann nicht die volle Bandbreite genutzt werden und im Falle eines Ausfalls, benötigt Spanning-Tree einige Zeit um den blockierten Pfad aufzuheben. Dadurch können Unterbrüche und Verzögerungen entstehen, welche in einem Rechenzentrum nicht erwünscht sind. TRILL behebt dieses Problem. Bei TRILL gibt es keine blockierten Pfade, somit kann die gesamte Bandbreite genutzt werden. TRILL betreibt im Gegensatz zu STP ein Layer 2 Routing, was dazuführt das keine Loops entstehen können. Das STP und das TRILL wurden beide von der gleichen Entwicklerin designed, und zwar von Radia Perlmann. 

\subsection{Wo kann TRILL eingesetzt werden?}
In datacenter for better migration of virtual machines. There will also be more bandwidth available for intensive applications like real-time communications and for the transport of storage traffic across the Ethernet network with FCoE and iSCSI.

\subsection{Is TRILL comparable to a traditional protocol?}It's a combination of traditional protocols (Ethernet, IP) and it's a bit like MPLS.
\subsection{What are the advantages and disadvantages of TRILL?}
TRILL make switches more cost-effective because it allows to load balance and to use more links in data center network designs.
Reduces Latency and improves overall network bandwidth utilization.
\subsection{Are there other modern technologies which are similar to TRILL} multichassis link aggregation or shortest path bridging
\subsection{How is TRILL configured in the LAB?}
\subsubsection{Trees}
\subsubsection{PacketFlow}
\subsubsection{MAC Learning} 
\newpage
\section{VXLAN - Teil 2}
\section{VXLAN with Arista switches}
\section{VXLAN Configuration}
\section{Research modern data center requirements}
Text jawoll ja

\end{document}
